(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{528:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return r(1394)}])},1394:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return G}});var a=r(5893),s=r(7294),l=r(1163),i=r(6291),n=r(3195),d=r(512),o=r(8388);function c(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.m6)((0,d.W)(t))}let x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:c("rounded-xl border border-zinc-200 bg-white text-zinc-950 shadow dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",r),...s})});x.displayName="Card";let m=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:c("flex flex-col space-y-1.5 p-6",r),...s})});m.displayName="CardHeader";let f=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:c("font-semibold leading-none tracking-tight",r),...s})});f.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:c("text-sm text-zinc-500 dark:text-zinc-400",r),...s})}).displayName="CardDescription";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:c("p-6 pt-0",r),...s})});u.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:c("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter";var h=r(8426),p=r(5139);let g=(0,p.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-zinc-950 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 dark:focus-visible:ring-zinc-300",{variants:{variant:{default:"bg-zinc-900 text-zinc-50 shadow hover:bg-zinc-900/90 dark:bg-zinc-50 dark:text-zinc-900 dark:hover:bg-zinc-50/90",destructive:"bg-red-500 text-zinc-50 shadow-sm hover:bg-red-500/90 dark:bg-red-900 dark:text-zinc-50 dark:hover:bg-red-900/90",outline:"border border-zinc-200 bg-white shadow-sm hover:bg-zinc-100 hover:text-zinc-900 dark:border-zinc-800 dark:bg-zinc-950 dark:hover:bg-zinc-800 dark:hover:text-zinc-50",secondary:"bg-zinc-100 text-zinc-900 shadow-sm hover:bg-zinc-100/80 dark:bg-zinc-800 dark:text-zinc-50 dark:hover:bg-zinc-800/80",ghost:"hover:bg-zinc-100 hover:text-zinc-900 dark:hover:bg-zinc-800 dark:hover:text-zinc-50",link:"text-zinc-900 underline-offset-4 hover:underline dark:text-zinc-50"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),b=s.forwardRef((e,t)=>{let{className:r,variant:s,size:l,asChild:i=!1,...n}=e,d=i?h.g7:"button";return(0,a.jsx)(d,{className:c(g({variant:s,size:l,className:r})),ref:t,...n})});b.displayName="Button";let w=s.forwardRef((e,t)=>{let{className:r,type:s,...l}=e;return(0,a.jsx)("input",{type:s,className:c("flex h-9 w-full rounded-md border border-zinc-200 bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-zinc-950 placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-zinc-950 disabled:cursor-not-allowed disabled:opacity-50 dark:border-zinc-800 dark:file:text-zinc-50 dark:placeholder:text-zinc-400 dark:focus-visible:ring-zinc-300",r),ref:t,...l})});w.displayName="Input";var j=r(4697),N=r(1568),v=r(4098),y=r(3785);let z=j.fC;j.ZA;let k=j.B4,_=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsxs)(j.xz,{ref:t,className:c("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-zinc-200 bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-white placeholder:text-zinc-500 focus:outline-none focus:ring-1 focus:ring-zinc-950 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 dark:border-zinc-800 dark:ring-offset-zinc-950 dark:placeholder:text-zinc-400 dark:focus:ring-zinc-300",r),...l,children:[s,(0,a.jsx)(j.JO,{asChild:!0,children:(0,a.jsx)(N.Z,{className:"h-4 w-4 opacity-50"})})]})});_.displayName=j.xz.displayName;let E=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(j.u_,{ref:t,className:c("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(v.Z,{className:"h-4 w-4"})})});E.displayName=j.u_.displayName;let R=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(j.$G,{ref:t,className:c("flex cursor-default items-center justify-center py-1",r),...s,children:(0,a.jsx)(N.Z,{className:"h-4 w-4"})})});R.displayName=j.$G.displayName;let C=s.forwardRef((e,t)=>{let{className:r,children:s,position:l="popper",...i}=e;return(0,a.jsx)(j.h_,{children:(0,a.jsxs)(j.VY,{ref:t,className:c("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-zinc-200 bg-white text-zinc-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:l,...i,children:[(0,a.jsx)(E,{}),(0,a.jsx)(j.l_,{className:c("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,a.jsx)(R,{})]})})});C.displayName=j.VY.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(j.__,{ref:t,className:c("px-2 py-1.5 text-sm font-semibold",r),...s})}).displayName=j.__.displayName;let S=s.forwardRef((e,t)=>{let{className:r,children:s,...l}=e;return(0,a.jsxs)(j.ck,{ref:t,className:c("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-zinc-100 focus:text-zinc-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-zinc-800 dark:focus:text-zinc-50",r),...l,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(j.wU,{children:(0,a.jsx)(y.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(j.eT,{children:s})]})});S.displayName=j.ck.displayName,s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(j.Z0,{ref:t,className:c("-mx-1 my-1 h-px bg-zinc-100 dark:bg-zinc-800",r),...s})}).displayName=j.Z0.displayName;var T=r(9976),Z=r(7749),A=r(7963),O=r(3594),U=r(63),D=r(5197),F=r(2770),V=r(3552);let L=(0,p.j)("relative w-full rounded-lg border border-zinc-200 px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-zinc-950 [&>svg~*]:pl-7 dark:border-zinc-800 dark:[&>svg]:text-zinc-50",{variants:{variant:{default:"bg-white text-zinc-950 dark:bg-zinc-950 dark:text-zinc-50",destructive:"border-red-500/50 text-red-500 dark:border-red-500 [&>svg]:text-red-500 dark:border-red-900/50 dark:text-red-900 dark:dark:border-red-900 dark:[&>svg]:text-red-900"}},defaultVariants:{variant:"default"}}),I=s.forwardRef((e,t)=>{let{className:r,variant:s,...l}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:c(L({variant:s}),r),...l})});I.displayName="Alert",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h5",{ref:t,className:c("mb-1 font-medium leading-none tracking-tight",r),...s})}).displayName="AlertTitle";let M=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:c("text-sm [&_p]:leading-relaxed",r),...s})});M.displayName="AlertDescription";let B=e=>{let{IDL:t}=e,r=t.Variant({Ok:t.Null,Err:t.Text}),a=t.Variant({Ok:t.Text,Err:t.Text}),s=t.Variant({Ok:t.Vec(t.Nat8),Err:t.Text});return t.Service({delete_model:t.Func([t.Text],[r],[]),get_model_config:t.Func([t.Text],[a],["query"]),get_model_names:t.Func([],[t.Vec(t.Text)],["query"]),get_model_weights:t.Func([t.Text],[s],["query"]),store_model:t.Func([t.Text,t.Vec(t.Nat8),t.Text],[r],[])})};var P=r(3454),q=e=>{let{authClient:t,identity:r}=e,[l,i]=(0,s.useState)([]),[d,o]=(0,s.useState)(""),[c,h]=(0,s.useState)(null),[p,g]=(0,s.useState)(!1),[j,N]=(0,s.useState)(null),[v,y]=(0,s.useState)(null),E=(0,s.useCallback)(async()=>{try{let e=new n.i7({host:"http://localhost:4943",identity:r});return n.vt.createActor(B,{agent:e,canisterId:P.env.NEXT_PUBLIC_MODEL_STORAGE_CANISTER_ID})}catch(e){throw console.error("Failed to initialize actor:",e),e}},[r]),R=(0,s.useCallback)(async()=>{try{let e=await E(),t=await e.get_model_names();i(t),N(null)}catch(e){N(e instanceof Error?e.message:"Failed to fetch model names"),console.error("Fetch error:",e)}},[E]),L=async()=>{if(c)try{g(!0),N(null);let e=await c.arrayBuffer(),t=new Uint8Array(e),r=await E(),a=await r.store_model(c.name,Array.from(t),JSON.stringify({name:c.name,size:c.size,type:c.type,uploadDate:new Date().toISOString()}));if("Err"in a)throw Error("string"==typeof a.Err?a.Err:"Upload failed");await R(),h(null)}catch(e){N(e instanceof Error?e.message:"Failed to upload model"),console.error("Upload error:",e)}finally{g(!1)}},q=async e=>{try{g(!0),N(null);let t=await E(),r=await t.get_model_weights(e);if("Ok"in r){let t=new Blob([new Uint8Array(r.Ok)]),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a)}else throw Error("string"==typeof r.Err?r.Err:"Download failed")}catch(e){N(e instanceof Error?e.message:"Failed to download model"),console.error("Download error:",e)}finally{g(!1)}};return(0,s.useEffect)(()=>{r&&y(r.getPrincipal().toString())},[r]),(0,s.useEffect)(()=>{r&&R()},[r,R]),(0,a.jsxs)("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"LLM Marketplace"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(T.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:v?"Principal: ".concat(v.slice(0,10),"..."):"Not connected"})]})]}),j&&(0,a.jsx)(I,{variant:"destructive",children:(0,a.jsx)(M,{children:j})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)(x,{children:[(0,a.jsxs)(m,{className:"flex flex-row items-center justify-between pb-2",children:[(0,a.jsx)(f,{className:"text-sm font-medium",children:"Total Revenue"}),(0,a.jsx)(Z.Z,{className:"w-4 h-4 text-muted-foreground"})]}),(0,a.jsxs)(u,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["$",45231.89]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"+20.1% from last month"})]})]}),(0,a.jsxs)(x,{children:[(0,a.jsxs)(m,{className:"flex flex-row items-center justify-between pb-2",children:[(0,a.jsx)(f,{className:"text-sm font-medium",children:"Subscriptions"}),(0,a.jsx)(A.Z,{className:"w-4 h-4 text-muted-foreground"})]}),(0,a.jsxs)(u,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["+",2350]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"+180.1% from last month"})]})]}),(0,a.jsxs)(x,{children:[(0,a.jsxs)(m,{className:"flex flex-row items-center justify-between pb-2",children:[(0,a.jsx)(f,{className:"text-sm font-medium",children:"Sales"}),(0,a.jsx)(O.Z,{className:"w-4 h-4 text-muted-foreground"})]}),(0,a.jsxs)(u,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["+",12234]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"+19% from last month"})]})]}),(0,a.jsxs)(x,{children:[(0,a.jsxs)(m,{className:"flex flex-row items-center justify-between pb-2",children:[(0,a.jsx)(f,{className:"text-sm font-medium",children:"Active Now"}),(0,a.jsx)(U.Z,{className:"w-4 h-4 text-muted-foreground"})]}),(0,a.jsxs)(u,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["+",573]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"+201 since last hour"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)(x,{children:[(0,a.jsx)(m,{children:(0,a.jsx)(f,{children:"Upload Model"})}),(0,a.jsx)(u,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(w,{type:"file",onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&(h(r),N(null))},disabled:p}),(0,a.jsxs)(b,{className:"w-full",disabled:!c||p,onClick:L,children:[p?(0,a.jsx)(D.Z,{className:"w-4 h-4 mr-2 animate-spin"}):(0,a.jsx)(F.Z,{className:"w-4 h-4 mr-2"}),"Upload Model"]})]})})]}),(0,a.jsxs)(x,{children:[(0,a.jsx)(m,{children:(0,a.jsx)(f,{children:"Download Model"})}),(0,a.jsx)(u,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(z,{value:d,onValueChange:o,children:[(0,a.jsx)(_,{children:(0,a.jsx)(k,{placeholder:"Select a model"})}),(0,a.jsx)(C,{children:l.map(e=>(0,a.jsx)(S,{value:e,children:e},e))})]}),(0,a.jsxs)(b,{className:"w-full",disabled:!d||p,onClick:()=>q(d),children:[p?(0,a.jsx)(D.Z,{className:"w-4 h-4 mr-2 animate-spin"}):(0,a.jsx)(V.Z,{className:"w-4 h-4 mr-2"}),"Download Model"]})]})})]})]})]})},G=()=>{let e=(0,l.useRouter)(),[t,r]=(0,s.useState)(!1),[n,d]=(0,s.useState)(null),[o,c]=(0,s.useState)(null);return((0,s.useEffect)(()=>{(async()=>{try{let t=await i.LY.create();d(t);let a=await t.isAuthenticated();if(console.log("Dashboard auth check:",a),!a){console.log("User not authenticated, redirecting to login..."),e.push("/");return}r(!0),c(t.getIdentity())}catch(t){console.error("Auth check failed:",t),e.push("/")}})()},[e]),t&&n&&o)?(0,a.jsx)(q,{authClient:n,identity:o}):(0,a.jsx)("div",{children:"Loading..."})}}},function(e){e.O(0,[475,888,774,179],function(){return e(e.s=528)}),_N_E=e.O()}]);